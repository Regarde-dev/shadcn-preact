{
  "name": "progress",
  "type": "registry:ui",
  "description": "Displays an indicator showing the completion progress of a task, typically displayed as a progress bar.",
  "registryDependencies": [
    "https://shadcn-preact.regarde.dev/cn.json"
  ],
  "files": [
    {
      "path": "progress.tsx",
      "type": "registry:ui",
      "content": "import { forwardRef, type HTMLAttributes } from \"preact/compat\";\nimport { cn } from \"./share/cn\";\n\ntype ProgressState = \"indeterminate\" | \"complete\" | \"loading\";\n\nconst DEFAULT_MAX = 100;\n\nexport type ProgressProps = HTMLAttributes<HTMLDivElement> & {\n  /**\n   * The progress value. Set to null or undefined for indeterminate state.\n   */\n  value?: number | null | undefined;\n\n  /**\n   * The maximum progress value.\n   * @default 100\n   */\n  max?: number;\n\n  /**\n   * A function to get the accessible label text representing the current value.\n   */\n  getValueLabel?(value: number, max: number): string;\n};\n\nexport const Progress = forwardRef<HTMLDivElement, ProgressProps>(\n  ({ className, class: classNative, value: valueProp = null, max: maxProp, getValueLabel = defaultGetValueLabel, ...props }, forwardedRef) => {\n    // Validate max\n    if ((maxProp || maxProp === 0) && !isValidMaxNumber(maxProp)) {\n      console.error(getInvalidMaxError(`${maxProp}`, \"Progress\"));\n    }\n\n    const max = isValidMaxNumber(maxProp) ? maxProp : DEFAULT_MAX;\n\n    // Validate value\n    if (valueProp !== null && !isValidValueNumber(valueProp, max)) {\n      console.error(getInvalidValueError(`${valueProp}`, \"Progress\"));\n    }\n\n    const value = isValidValueNumber(valueProp, max) ? valueProp : null;\n    const valueLabel = isNumber(value) ? getValueLabel(value, max) : undefined;\n    const progressState = getProgressState(value, max);\n\n    return (\n      <div\n        ref={forwardedRef}\n        role=\"progressbar\"\n        aria-valuemax={max}\n        aria-valuemin={0}\n        aria-valuenow={isNumber(value) ? value : undefined}\n        aria-valuetext={valueLabel}\n        data-slot=\"progress\"\n        data-state={progressState}\n        data-value={value ?? undefined}\n        data-max={max}\n        className={cn(\n          \"relative h-2 w-full overflow-hidden rounded-full bg-primary/20\",\n          className,\n          classNative\n        )}\n        {...props}\n      >\n        <div\n          data-slot=\"progress-indicator\"\n          data-state={progressState}\n          data-value={value ?? undefined}\n          data-max={max}\n          className=\"h-full w-full flex-1 bg-primary transition-all\"\n          style={{\n            transform: `translateX(-${100 - (value ?? 0)}%)`,\n          }}\n        />\n      </div>\n    );\n  }\n);\nProgress.displayName = \"Progress\";\n\n/* ---------------------------------------------------------------------------------------------- */\n\nfunction defaultGetValueLabel(value: number, max: number) {\n  return `${Math.round((value / max) * 100)}%`;\n}\n\nfunction getProgressState(value: number | undefined | null, maxValue: number): ProgressState {\n  return value == null ? \"indeterminate\" : value === maxValue ? \"complete\" : \"loading\";\n}\n\nfunction isNumber(value: any): value is number {\n  return typeof value === \"number\";\n}\n\nfunction isValidMaxNumber(max: any): max is number {\n  return isNumber(max) && !Number.isNaN(max) && max > 0;\n}\n\nfunction isValidValueNumber(value: any, max: number): value is number {\n  return isNumber(value) && !Number.isNaN(value) && value <= max && value >= 0;\n}\n\nfunction getInvalidMaxError(propValue: string, componentName: string) {\n  return `Invalid prop \\`max\\` of value \\`${propValue}\\` supplied to \\`${componentName}\\`. Only numbers greater than 0 are valid max values. Defaulting to \\`${DEFAULT_MAX}\\`.`;\n}\n\nfunction getInvalidValueError(propValue: string, componentName: string) {\n  return `Invalid prop \\`value\\` of value \\`${propValue}\\` supplied to \\`${componentName}\\`. The \\`value\\` prop must be:\n  - a positive number\n  - less than the value passed to \\`max\\` (or ${DEFAULT_MAX} if no \\`max\\` prop is set)\n  - \\`null\\` or \\`undefined\\` if the progress is indeterminate.\n\nDefaulting to \\`null\\`.`;\n}\n"
    }
  ],
  "category": "ui"
}

