{
  "name": "checkbox",
  "type": "registry:ui",
  "description": "A control that allows the user to toggle between checked and not checked.",
  "dependencies": ["lucide-preact"],
  "registryDependencies": [
    "https://shadcn-preact.regarde.dev/cn.json",
    "https://shadcn-preact.regarde.dev/useControlledState.json"
  ],
  "files": [
    {
      "path": "checkbox.tsx",
      "type": "registry:ui",
      "content": "import { Check } from \"lucide-preact\";\nimport type { ComponentProps } from \"preact\";\nimport { forwardRef } from \"preact/compat\";\nimport { cn } from \"./share/cn\";\nimport { useControlledState } from \"./share/useControlledState\";\n\ntype CheckedState = boolean;\n\nexport type CheckboxProps = Omit<ComponentProps<\"button\">, \"value\"> & {\n  /** The controlled checked state of the checkbox */\n  checked?: CheckedState;\n  /** The default checked state when uncontrolled */\n  defaultChecked?: CheckedState;\n  /** Whether the checkbox is required in a form */\n  required?: boolean;\n  /** Callback fired when the checked state changes */\n  onCheckedChange?(checked: CheckedState): void;\n  /** The name of the checkbox for form submission */\n  name?: string;\n  /** The form id this checkbox belongs to */\n  form?: string;\n};\n\nexport const Checkbox = forwardRef<HTMLButtonElement, CheckboxProps>(\n  (\n    {\n      disabled,\n      className,\n      checked: controlledChecked,\n      defaultChecked,\n      required,\n      onCheckedChange,\n      name,\n      form,\n      ...props\n    },\n    forwardedRef\n  ) => {\n    const [checked, setChecked] = useControlledState({\n      defaultValue: Boolean(defaultChecked),\n      controlledValue: controlledChecked,\n      onChange: onCheckedChange,\n    });\n\n    const handleClick = () => {\n      if (disabled) return;\n      setChecked((prev) => !prev);\n    };\n\n    const handleKeyDown = (e: KeyboardEvent) => {\n      // Space key toggles checkbox\n      if (e.key === \" \") {\n        e.preventDefault();\n        handleClick();\n      }\n    };\n\n    return (\n      <>\n        <button\n          ref={forwardedRef}\n          type=\"button\"\n          role=\"checkbox\"\n          aria-checked={checked}\n          aria-required={required}\n          disabled={disabled}\n          data-state={checked ? \"checked\" : \"unchecked\"}\n          data-disabled={disabled ? \"true\" : undefined}\n          data-slot=\"checkbox\"\n          onClick={handleClick}\n          onKeyDown={handleKeyDown as any}\n          className={cn(\n            \"peer h-4 w-4 shrink-0 rounded-sm border border-primary shadow focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground\",\n            className\n          )}\n          {...props}\n        >\n          <div className=\"flex items-center justify-center text-current\">\n            {checked ? <Check className=\"h-4 w-4\" /> : null}\n          </div>\n        </button>\n\n        {/* Hidden input for form submission */}\n        {name && (\n          <input\n            type=\"checkbox\"\n            name={name}\n            form={form}\n            checked={checked}\n            required={required}\n            aria-hidden=\"true\"\n            tabIndex={-1}\n            value={checked ? \"on\" : \"off\"}\n            data-state={checked ? \"checked\" : \"unchecked\"}\n            data-disabled={disabled ? \"true\" : undefined}\n            style={{\n              transform: \"translateX(-100%)\",\n              position: \"absolute\",\n              pointerEvents: \"none\",\n              opacity: 0,\n              margin: 0,\n              width: \"25px\",\n              height: \"25px\",\n            }}\n            onChange={() => {}} // Controlled by button\n          />\n        )}\n      </>\n    );\n  }\n);\nCheckbox.displayName = \"Checkbox\";\n"
    }
  ],
  "category": "ui"
}

