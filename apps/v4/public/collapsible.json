{
  "name": "collapsible",
  "type": "registry:ui",
  "description": "An interactive component which expands/collapses a panel.",
  "registryDependencies": [
    "https://shadcn-preact.regarde.dev/cn.json",
    "https://shadcn-preact.regarde.dev/slot.json",
    "https://shadcn-preact.regarde.dev/useControlledState.json",
    "https://shadcn-preact.regarde.dev/show.json"
  ],
  "files": [
    {
      "path": "collapsible.tsx",
      "type": "registry:ui",
      "content": "import type { ButtonHTMLAttributes } from \"preact\";\nimport { type HTMLAttributes, type PropsWithChildren, createContext, forwardRef } from \"preact/compat\";\nimport { useContext } from \"preact/hooks\";\nimport { cn } from \"./share/cn\";\nimport { Slot } from \"./share/slot\";\nimport { useControlledState } from \"./share/useControlledState\";\nimport { Show } from \"./show\";\n\nexport type CollapsibleContextT = {\n  open: boolean;\n  openCollapsible: () => void;\n  closeCollapsible: () => void;\n  disabled: boolean;\n};\n\nexport const CollapsibleContext = createContext<CollapsibleContextT | null>(null);\n\nexport type CollapsibleProps = PropsWithChildren<HTMLAttributes<HTMLDivElement>> & {\n  /**\n   * Change the default rendered element for the one passed as a child,\n   * merging their props and behavior.\n   */\n  asChild?: boolean;\n\n  /**\n   * The default open state when uncontrolled.\n   */\n  defaultOpen?: boolean;\n\n  /**\n   * The controlled open state of the collapsible.\n   */\n  open?: boolean;\n\n  /**\n   * Event handler called when the open state changes.\n   */\n  onOpenChange?: (open: boolean) => void;\n\n  /**\n   * When true, prevents the user from interacting with the collapsible.\n   */\n  disabled?: boolean;\n};\n\nexport const Collapsible = forwardRef<HTMLDivElement, CollapsibleProps>(\n  (\n    {\n      children,\n      open: controlledOpen,\n      onOpenChange,\n      defaultOpen,\n      class: classNative,\n      className,\n      disabled,\n      asChild,\n      ...props\n    },\n    forwardedRef\n  ) => {\n    const [open, setOpen] = useControlledState({\n      defaultValue: Boolean(defaultOpen),\n      controlledValue: controlledOpen,\n      onChange: onOpenChange,\n    });\n\n    const Comp = asChild ? Slot : \"div\";\n\n    return (\n      <CollapsibleContext.Provider\n        value={{\n          open,\n          openCollapsible: () => setOpen(true),\n          closeCollapsible: () => setOpen(false),\n          disabled: Boolean(disabled),\n        }}\n      >\n        <Comp\n          ref={forwardedRef}\n          data-slot=\"collapsible\"\n          data-state={open ? \"open\" : \"closed\"}\n          data-disabled={disabled ? \"true\" : undefined}\n          className={cn(className, classNative)}\n          {...props}\n        >\n          {children}\n        </Comp>\n      </CollapsibleContext.Provider>\n    );\n  }\n);\nCollapsible.displayName = \"Collapsible\";\n\nexport function useCollapsible() {\n  const c = useContext(CollapsibleContext);\n  if (!c) throw new Error(\"useCollapsible should be used within Collapsible\");\n  return c;\n}\n\nexport type CollapsibleTriggerProps = ButtonHTMLAttributes<HTMLButtonElement> & {\n  /**\n   * Change the default rendered element for the one passed as a child,\n   * merging their props and behavior.\n   */\n  asChild?: boolean;\n};\n\nexport const CollapsibleTrigger = forwardRef<HTMLButtonElement, CollapsibleTriggerProps>(\n  ({ children, asChild, className, class: classNative, onClick, ...props }, forwardedRef) => {\n    const { openCollapsible, closeCollapsible, open, disabled } = useCollapsible();\n    const Comp = asChild ? Slot : \"button\";\n\n    const handleClick: typeof onClick = (e) => {\n      if (disabled) return;\n      open ? closeCollapsible() : openCollapsible();\n      onClick?.(e);\n    };\n\n    return (\n      <Comp\n        ref={forwardedRef}\n        type=\"button\"\n        aria-expanded={open}\n        aria-disabled={disabled}\n        data-slot=\"collapsible-trigger\"\n        data-state={open ? \"open\" : \"closed\"}\n        data-disabled={disabled ? \"true\" : undefined}\n        disabled={disabled}\n        onClick={handleClick}\n        className={cn(className, classNative)}\n        {...props}\n      >\n        {children}\n      </Comp>\n    );\n  }\n);\nCollapsibleTrigger.displayName = \"CollapsibleTrigger\";\n\nexport type CollapsibleContentProps = HTMLAttributes<HTMLDivElement>;\n\nexport const CollapsibleContent = forwardRef<HTMLDivElement, CollapsibleContentProps>(\n  ({ children, className, class: classNative, ...props }, forwardedRef) => {\n    const { open, disabled } = useCollapsible();\n\n    return (\n      <Show when={open}>\n        <div\n          ref={forwardedRef}\n          data-slot=\"collapsible-content\"\n          data-state={open ? \"open\" : \"closed\"}\n          data-disabled={disabled ? \"true\" : undefined}\n          className={cn(className, classNative)}\n          {...props}\n        >\n          {children}\n        </div>\n      </Show>\n    );\n  }\n);\nCollapsibleContent.displayName = \"CollapsibleContent\";\n"
    }
  ],
  "category": "ui"
}

